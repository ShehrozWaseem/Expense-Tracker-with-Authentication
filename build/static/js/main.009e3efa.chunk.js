(this["webpackJsonpmy-money"]=this["webpackJsonpmy-money"]||[]).push([[0],{24:function(e,t,n){e.exports={navbar:"Navbar_navbar__2f3Vn",title:"Navbar_title__1aUl4"}},31:function(e,t,n){e.exports={container:"Home_container__3q6on",loading:"Home_loading__24E9e"}},37:function(e,t,n){e.exports={"login-form":"Login_login-form__2VXmU"}},38:function(e,t,n){e.exports={"signup-form":"Signup_signup-form__1rHLY"}},43:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),r=n(33),s=n.n(r),i=(n(43),n(23)),l=n(16),u=n(24),o=n.n(u),j=n(10),b=n.n(j),d=n(15),O=n(5),p=n(25);n(63),n(46);p.a.initializeApp({apiKey:"AIzaSyABLOqT14RSpqfyb_g76s3aYgI6OBZcBOc",authDomain:"myexpenses-5f9ad.firebaseapp.com",projectId:"myexpenses-5f9ad",storageBucket:"myexpenses-5f9ad.appspot.com",messagingSenderId:"404015996884",appId:"1:404015996884:web:9642339289864e930c4041"});var x=p.a.firestore(),h=p.a.auth(),f=p.a.firestore.Timestamp,m=n(9),v=n(1),g=Object(a.createContext)(),y=function(e,t){switch(t.type){case"LOGIN":return Object(m.a)(Object(m.a)({},e),{},{user:t.payload});case"LOGOUT":return Object(m.a)(Object(m.a)({},e),{},{user:null});case"AUTH_IS_READY":return Object(m.a)(Object(m.a)({},e),{},{user:t.payload,authisReady:!0});default:return e}},_=function(e){var t=e.children,n=Object(a.useReducer)(y,{user:null,authisReady:!1}),c=Object(O.a)(n,2),r=c[0],s=c[1];return Object(a.useEffect)((function(){var e=h.onAuthStateChanged((function(t){s({type:"AUTH_IS_READY",payload:t}),e()}))}),[]),console.log("context state",r),Object(v.jsx)(g.Provider,{value:Object(m.a)(Object(m.a)({},r),{},{dispatch:s}),children:t})},N=function(){var e=Object(a.useContext)(g);if(!e)throw Error("Context not avaialble for this component");return e};var S=function(){var e=function(){var e=Object(a.useState)(null),t=Object(O.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!1),s=Object(O.a)(r,2),i=s[0],l=s[1],u=N().dispatch,o=Object(a.useState)(!1),j=Object(O.a)(o,2),p=j[0],x=j[1],f=function(){var e=Object(d.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(null),l(!0),e.prev=2,e.next=5,h.signOut();case 5:u({type:"LOGOUT"}),p||(l(!1),c(null)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0.message),p||(c(e.t0.message),l(!1));case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){return function(){return x(!0)}}),[]),{error:n,pending:i,logout:f}}().logout,t=N().user;return Object(v.jsx)("nav",{className:o.a.navbar,children:Object(v.jsxs)("ul",{children:[Object(v.jsx)("li",{className:o.a.title,children:"MyExpenses"}),!t&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("li",{className:o.a.signup,children:Object(v.jsx)(i.b,{to:"/signup",children:" Sign Up "})}),Object(v.jsx)("li",{className:o.a.login,children:Object(v.jsx)(i.b,{to:"/login",children:"Log In"})})]}),t&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("li",{children:["Hello, ",Object(v.jsx)("strong",{children:t.displayName}),"  "]}),Object(v.jsx)("li",{children:Object(v.jsx)("button",{className:"btn",onClick:e,children:"Logout"})})]})]})})},D=n(20);n(53);var E=function(e){var t="cardcss "+e.className;return Object(v.jsx)("div",{className:t,children:e.children})};n(54),n(55);var w=function(e){var t=e.date.toDate().toLocaleString("en-US",{month:"long"}),n=e.date.toDate().toLocaleString("en-US",{day:"2-digit"}),a=e.date.toDate().getFullYear();return Object(v.jsxs)("div",{className:"expense-date",children:[Object(v.jsx)("div",{className:"expense-date__month",children:t}),Object(v.jsx)("div",{className:"expense-date__year",children:a}),Object(v.jsx)("div",{className:"expense-date__day",children:n})]})},C=n.p+"static/media/delete.9791eda4.svg",I={document:null,isPending:null,isError:null,success:null},L=function(e,t){switch(t.type){case"IS_PENDING":return{isPending:!0,isError:null,document:null,success:null};case"DOC_ADDED":case"DLETED_DOC":return{isPending:!1,isError:null,document:t.payload,success:!0};case"ERROR":return{isPending:!1,error:t.payload,document:null,success:null};default:return e}},k=function(e){var t=Object(a.useReducer)(L,I),n=Object(O.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(!1),i=Object(O.a)(s,2),l=i[0],u=i[1],o=x.collection(e),j=function(e){l||r(e)},p=function(){var e=Object(d.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r({type:"IS_PENDING"}),e.prev=1,f.fromDate(new Date),e.next=5,o.add(t);case 5:n=e.sent,j({type:"ADDED_DOC",payload:n}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),j({type:"ERROR",payload:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(d.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r({type:"IS_PENDING"}),e.prev=1,e.next=4,o.doc(t).delete();case 4:n=e.sent,j({type:"DLETED_DOC",payload:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),j({type:"ERROR",payload:e.t0.message});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){return function(){return u(!0)}}),[]),{addDocument:p,remDocument:h,response:c}};var R=function(e){var t=k("transactions"),n=t.remDocument;return t.response,Object(v.jsxs)(E,{className:"expense-item",children:[Object(v.jsx)(w,{date:e.date}),Object(v.jsxs)("div",{className:"expense-item__description",children:[Object(v.jsx)("h2",{children:e.title}),Object(v.jsxs)("div",{className:"expense-item__price",children:[e.amount,"$"]}),Object(v.jsx)("img",{className:"dlt",onClick:function(){return n(e.id)},src:C,alt:"remove"})]})]})},A=(n(56),function(e){return Object(v.jsx)("div",{className:"expenses-filter",children:Object(v.jsxs)("div",{className:"expenses-filter__control",children:[Object(v.jsx)("label",{children:"Filter by year"}),Object(v.jsxs)("select",{value:e.selected,onChange:function(t){e.onChangeFilter(t.target.value)},children:[Object(v.jsx)("option",{value:"2022",children:"2022"}),Object(v.jsx)("option",{value:"2021",children:"2021"}),Object(v.jsx)("option",{value:"2020",children:"2020"}),Object(v.jsx)("option",{value:"2019",children:"2019"})]})]})})}),P=(n(57),n(36));n(58),n(59);var F=function(e){var t="0%";return e.maxValue>0&&(t=Math.round(e.value/e.maxValue*100)+"%"),Object(v.jsxs)("div",{className:"chart-bar",children:[Object(v.jsx)("div",{className:"chart-bar__inner",children:Object(v.jsx)("div",{className:"chart-bar__fill",style:{height:t}})}),Object(v.jsx)("div",{className:"chart-bar__label",children:e.label})]})};var U=function(e){var t=e.dataPoints.map((function(e){return e.value})),n=Math.max.apply(Math,Object(D.a)(t));return Object(v.jsx)("div",{className:"chart",children:e.dataPoints.map((function(e){return Object(v.jsx)(F,{value:e.value,maxValue:n,label:e.label},e.label)}))})};var M=function(e){var t,n=[{label:"Jan",value:0},{label:"Feb",value:0},{label:"Mar",value:0},{label:"Apr",value:0},{label:"May",value:0},{label:"Jun",value:0},{label:"Jul",value:0},{label:"Aug",value:0},{label:"Sep",value:0},{label:"Oct",value:0},{label:"Nov",value:0},{label:"Dec",value:0}],a=Object(P.a)(e.expenses);try{for(a.s();!(t=a.n()).done;){var c=t.value;n[c.date.toDate().getMonth()].value+=c.amount}}catch(r){a.e(r)}finally{a.f()}return Object(v.jsx)(U,{dataPoints:n})};var T=function(e){var t=Object(a.useState)("2022"),n=Object(O.a)(t,2),c=n[0],r=n[1],s=e.items.filter((function(e){return e.date.toDate().getFullYear().toString()===c}));return Object(v.jsxs)(E,{className:"expenses",children:[Object(v.jsx)(A,{selected:c,onChangeFilter:function(e){r(e)}}),Object(v.jsx)(M,{expenses:s}),0===s.length?Object(v.jsxs)("p",{children:["No expense for year ",Object(v.jsx)("b",{children:c})]}):s.map((function(e){return Object(v.jsx)(R,{title:e.title,amount:e.amount,date:e.date,id:e.id},e.id)}))]})},G=(n(60),function(e){var t=Object(a.useState)(""),n=Object(O.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(""),i=Object(O.a)(s,2),l=i[0],u=i[1],o=Object(a.useState)(""),j=Object(O.a)(o,2),b=j[0],d=j[1],p=Object(a.useState)(!1),x=Object(O.a)(p,2),h=x[0],m=x[1],g=k("transactions"),y=g.addDocument,_=g.response,S=N().user;Object(a.useEffect)((function(){r(""),u(""),d("")}),[_.success]);return Object(v.jsx)("div",{children:h?Object(v.jsx)("form",{onSubmit:function(e){e.preventDefault(),y({uid:S.uid,title:c,amount:+l,date:f.fromDate(new Date(b))}),r(""),u(""),d("")},children:Object(v.jsxs)("div",{className:"new-expense__controls",children:[Object(v.jsxs)("div",{className:"new-expense__control",children:[Object(v.jsx)("label",{children:"Title"}),Object(v.jsx)("input",{type:"text",value:c,onChange:function(e){r(e.target.value)}})]}),Object(v.jsxs)("div",{className:"new-expense__control",children:[Object(v.jsx)("label",{children:"Amount"}),Object(v.jsx)("input",{type:"Number",value:l,min:"0.01",step:"0.01",onChange:function(e){u(e.target.value)}})]}),Object(v.jsxs)("div",{className:"new-expense__control",children:[Object(v.jsx)("label",{children:"Date"}),Object(v.jsx)("input",{type:"date",value:b,min:"2020-01-01",max:"2022-12-31",onChange:function(e){d(e.target.value)}})]}),Object(v.jsxs)("div",{className:"new-expense__actions",children:[Object(v.jsx)("button",{type:"submit",children:"Submit"}),Object(v.jsx)("button",{type:"submit",onClick:function(){m(!1)},children:"Cancel"})]})]})}):Object(v.jsx)("button",{onClick:function(){m(!0)},children:"Add New Expense "})})}),H=(n(61),function(e){return Object(v.jsx)("div",{className:"new-expense",children:Object(v.jsx)(G,{onSaveData:function(t){var n=Object(m.a)(Object(m.a)({},t),{},{id:Math.random.toString()});e.onFormData(n)}})})}),Y=n(31),B=n.n(Y),J=function(e,t){var n=Object(a.useState)(),c=Object(O.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)(),l=Object(O.a)(i,2),u=l[0],o=l[1],j=Object(a.useRef)(t).current;return Object(a.useEffect)((function(){var t,n=x.collection(e);j&&(n=(t=n).where.apply(t,Object(D.a)(j)));var a=n.onSnapshot((function(e){var t=[];e.docs.forEach((function(e){t.push(Object(m.a)(Object(m.a)({},e.data()),{},{id:e.id}))})),s(t),o(null)}),(function(e){console.log(e),o("could not fetch the data")}));return function(){return a()}}),[e,j]),{error:u,documents:r}};var V=function(){var e=N().user,t=J("transactions",["uid","==",e.uid]),n=t.documents,c=t.error,r=Object(a.useState)(""),s=Object(O.a)(r,2),i=(s[0],s[1]);return Object(v.jsxs)("div",{className:B.a.container,children:[c&&Object(v.jsx)("p",{children:c}),!n&&Object(v.jsx)("h1",{className:B.a.loading,children:"Loading Data..."}),n&&Object(v.jsx)(H,{onFormData:function(e){i((function(t){return[e].concat(Object(D.a)(t))}))}}),n&&Object(v.jsx)(T,{items:n})]})},q=n(37),z=n.n(q);function W(){var e=function(){var e=Object(a.useState)(null),t=Object(O.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!1),s=Object(O.a)(r,2),i=s[0],l=s[1],u=N().dispatch,o=Object(a.useState)(!1),j=Object(O.a)(o,2),p=j[0],x=j[1],f=function(){var e=Object(d.a)(b.a.mark((function e(t,n){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(null),l(!0),e.prev=2,e.next=5,h.signInWithEmailAndPassword(t,n);case 5:a=e.sent,u({type:"LOGIN",payload:a.user}),p||(l(!1),c(null)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0.message),p||(c(e.t0.message),l(!1));case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){return function(){return x(!0)}}),[]),{error:n,pending:i,login:f}}(),t=e.error,n=e.pending,c=e.login,r=Object(a.useState)(""),s=Object(O.a)(r,2),i=s[0],l=s[1],u=Object(a.useState)(""),o=Object(O.a)(u,2),j=o[0],p=o[1];return Object(v.jsxs)("form",{onSubmit:function(e){e.preventDefault(),c(i,j)},className:z.a["login-form"],children:[Object(v.jsx)("h2",{children:"Log in"}),Object(v.jsxs)("label",{children:[Object(v.jsx)("span",{children:"Email:"}),Object(v.jsx)("input",{type:"email",onChange:function(e){l(e.target.value)}})]}),Object(v.jsxs)("label",{children:[Object(v.jsx)("span",{children:"Password:"}),Object(v.jsx)("input",{type:"password",onChange:function(e){p(e.target.value)}})]}),!n&&Object(v.jsx)("button",{className:"btn",children:"Log in"}),n&&Object(v.jsx)("button",{className:"btn",disabled:!0,children:"Loading..."}),t&&Object(v.jsx)("p",{children:t})]})}var K=function(){var e=Object(a.useState)(null),t=Object(O.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!1),s=Object(O.a)(r,2),i=s[0],l=s[1],u=N().dispatch,o=Object(a.useState)(!1),j=Object(O.a)(o,2),p=j[0],x=j[1],f=function(){var e=Object(d.a)(b.a.mark((function e(t,n,a){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(null),l(!0),e.prev=2,e.next=5,h.createUserWithEmailAndPassword(t,n);case 5:if(r=e.sent){e.next=8;break}throw new Error("Could not create this user");case 8:return e.next=10,r.user.updateProfile({displayName:a});case 10:u({type:"LOGIN",payload:r.user}),p||(l(!1),c(null)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),p||(console.log(e.t0.message),c(e.t0.message),l(!1));case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(t,n,a){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){return function(){return x(!0)}}),[]),{error:n,pending:i,signup:f}},X=n(38),Z=n.n(X);function $(){var e=Object(a.useState)(""),t=Object(O.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),s=Object(O.a)(r,2),i=s[0],l=s[1],u=Object(a.useState)(""),o=Object(O.a)(u,2),j=o[0],b=o[1],d=K(),p=d.error,x=d.pending,h=d.signup;return Object(v.jsxs)("form",{onSubmit:function(e){e.preventDefault(),h(n,i,j)},className:Z.a["signup-form"],children:[Object(v.jsx)("h2",{children:"Sign up"}),Object(v.jsxs)("label",{children:[Object(v.jsx)("span",{children:"Email:"}),Object(v.jsx)("input",{type:"email",onChange:function(e){return c(e.target.value)},value:n})]}),Object(v.jsxs)("label",{children:[Object(v.jsx)("span",{children:"Password:"}),Object(v.jsx)("input",{type:"password",onChange:function(e){return l(e.target.value)},value:i})]}),Object(v.jsxs)("label",{children:[Object(v.jsx)("span",{children:"Display Name:"}),Object(v.jsx)("input",{type:"text",onChange:function(e){return b(e.target.value)},value:j})]}),!x&&Object(v.jsx)("button",{className:"btn",children:"Sign up"}),x&&Object(v.jsx)("button",{className:"btn",disabled:!0,children:"Loading..."}),p&&Object(v.jsx)("p",{children:p})]})}var Q=function(){var e=N().authisReady,t=N().user;return Object(v.jsx)("div",{className:"App",children:e&&Object(v.jsxs)(i.a,{children:[Object(v.jsx)(S,{}),Object(v.jsxs)(l.d,{children:[Object(v.jsxs)(l.b,{exact:!0,path:"/",children:[!t&&Object(v.jsx)(l.a,{to:"/login"}),t&&Object(v.jsx)(V,{})]}),Object(v.jsxs)(l.b,{path:"/signup",children:[t&&Object(v.jsx)(l.a,{to:"/"}),!t&&Object(v.jsx)($,{})]}),Object(v.jsxs)(l.b,{path:"/login",children:[t&&Object(v.jsx)(l.a,{to:"/"}),!t&&Object(v.jsx)(W,{})]})]})]})})};s.a.render(Object(v.jsx)(c.a.StrictMode,{children:Object(v.jsx)(_,{children:Object(v.jsx)(Q,{})})}),document.getElementById("root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.009e3efa.chunk.js.map